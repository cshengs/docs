# 小技巧 Tips

> 这里主要记录适合单独开一个文件的小技巧。

## 开发实践

> 结合自己的经历，记录一些开发实践。

**记得封装数据库操作**

在设计架构时，不管选择哪个数据库，一定要用工厂模式来封装数据库操作，这样可以方便切换数据库。

（我刚开始利用 Python 开发的应用选用了 SQLite，用了一个类来操作，现在我想更换为 MySQL，发现要改动的地方太多了）

## 正则表达式 Regex

设计笔记官方有一篇文章专门介绍正则表达式，可以参考[这里](https://www.shejibiji.com/archives/8719)。

这里相当于是一个补充，通过使用场景来介绍正则表达式的使用。

**1. 匹配 MD 中的标题**

比如我想匹配`## Title`这样的标题，直接搜索`## `也会匹配到`### Title`，这个时候就可以用正则来匹配，在搜索替换中输入下面命令就可以排除掉 H3 的标题：

```bash
(?<!#)##\s
```

- `(?<!#)`: 表示不匹配`#`，即`##`前面不能有`#`。

- `\s`: 表示空格。

## YAML

Yaml 是一种轻量级的数据序列化格式，易于阅读和编写。在 Python 中，我们可以使用 PyYAML 库来读写 Yaml 文件。

### 基础语法

- 字典：使用冒号`:`来分隔键值对，使用缩进表示层级关系。

  ```yaml
  key1: value1
  key2:
    - value2
    - value3
  ```

- 列表：使用连字符`-`表示列表元素，使用缩进表示层级关系。

  ```yaml
  - value1
  - value2
  ```

- 注释：使用井号`#`表示注释。

  ```yaml
  # 这是一个注释
  ```

- 换行符：使用`|`表示保留换行符，使用`>`表示折叠换行符。

  ```yaml
  key: |
    这是一个
    多行字符串
  ```

- 换行连字符： 如果一行太长，可以使用连字符`\`来换行，依然表示一行。

  ```yaml
  key: 这是一个很长的字符串，\
    可以使用连字符来换行
  ```

## Xpath

Xpath 是一种在 XML 文档中定位节点的语言，也可以用于 HTML 文档。

### 基础语法

在网页爬虫中，我们经常会用到 Xpath 来定位元素，这里记录一些常用的 Xpath 语法。

- `//`：从根节点选取节点。(如果已经在根节点，可以省略`/`)

- `/`：从当前节点选取**直接**子节点。

- `.`：选取当前节点。

- `..`：选取当前节点的父节点。

- `@`：选取属性。

- `[]`：用于筛选节点。

- `contains()`：用于匹配包含指定文本的节点。

- `text()`：选取文本节点。

- `last()`：选取最后一个节点。

- `position()`：选取当前节点的位置。

- `and`：逻辑与。

- `./parent::`：选取当前节点的父节点。

- `./following-sibling::`：选取当前节点之后的所有兄弟节点。

- `./preceding-sibling::`：选取当前节点之前的所有兄弟节点。

- `./ancestor::`：选取当前节点的所有祖先节点。

### 使用案例

1. 找到所有 div 元素，并且类名为`content`：

   ```bash
   //div[@class='content']
   ```

2. 找到所有 div 元素，并且类名包含`content`：

   ```bash
   //div[contains(@class, 'content')]
   ```

3. 找到所有 div 元素，并且类名包含`content__`，并且 id 为`main`：

   （通过这个方法可以实现一些模糊匹配）

   ```bash
   //div[contains(@class, 'content__') and @id='main']
   ```

4. 找到类名为`content`的 div 下面的所有 a 元素：

   ```bash
   //div[@class='content']//a
   ```

5. 找到类名为`content`的 div 下面的 span 元素，并且文本为`添加商品`：

   ```bash
   //div[@class='content' and ./span[text()='添加商品']]
   ```

## TeX/LaTeX

TeX/LaTeX 是一种排版系统，广泛用于科学、数学和技术文档的书写。TeX 是基础排版系统，而 LaTeX 是基于 TeX 的一个宏包，提供了更高级的功能，使得文档的排版更简便。它们特别擅长处理复杂的数学公式和参考文献。

### 数学公式

在 Typora 中，我们可以使用 TeX/LaTeX 语法来输入数学公式。

- 行内公式：使用 `$` 包裹公式，例如 `$a^2 + b^2 = c^2$`。

- 行间公式：使用 `$$` 包裹公式，例如 `$$a^2 + b^2 = c^2$$`。

- 上标：使用 `^`，例如 `a^2`。

- 下标：使用 `_`，例如 `a_1`。

- 分数：使用 `\frac{分子}{分母}`，例如 `\frac{a}{b}`。

- 开方：使用 `\sqrt{}`，例如 `\sqrt{2}`。

- 求和：使用 `\sum`，例如 `\sum_{i=1}^{n} i`。

- 积分：使用 `\int`，例如 `\int_{a}^{b} f(x) dx`。

- 矩阵：使用 `\begin{matrix} \end{matrix}`，例如 `\begin{matrix} 1 & 2 \\ 3 & 4 \end{matrix}`。

## 电力系统

### 民用电计算

**已知功率，如何算出所需电流**

功率（瓦特，W）和电流（安培，A）之间的关系可以通过公式 $P=V×I$ 来表示，其中 $P$ 是功率，$V$ 是电压，$I$ 是电流。在中国，标准电压为 220V。

例如，对于一个功率为 2600W 的热水壶，计算电流为：

$$
I = \frac{P}{V} = \frac{2600W}{220V} \approx 11.82A
$$

**民用电量度数计算**

1 度电（千瓦时，kWh）是指一个功率为 1 千瓦的设备运行 1 小时所消耗的电能。

例如，2600W 的热水壶使用 1 小时就消耗了 2.6 度电。

### 万用表的使用

**基础用法**

万用表有两个探针，一个红色，一个黑色。在测量电路时，红色探针连接正极，黑色探针连接负极。

**检测电路通路**

档位通常使用表示`Ω`或者类似 WIFI 的符号。

这个时候把两个探针连在一起，就可以听到蜂鸣声，表示两个探针是通路的。

之后就可以用这个方法来检测电路是否通路。
